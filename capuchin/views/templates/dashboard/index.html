{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block head %}
<script src="/static/vendor/topojson.v1.min.js"></script>
<script src="/static/js/charts/chart.js"></script>

<script>
$(document).ready(function(){
    /*
    $("#charts").usa({
        name:"Users by City",
        data_url:"{{url_for('.chart', chart_id='city_population')}}"
    }).render(12);
    $("#charts").vertical_circle({
        name:"Top Referrers",
        data_url:"{{url_for('.chart', chart_id='referrers')}}"
    }).render(12);
    $("#charts").horizontal_multibar({
        name:"Top Likes",
        data_url:"{{url_for('.chart', chart_id='top_likes')}}"
    }).render(12);
    */
    $("#charts").multibar({
        name:"Page Engagement",
        data_url:"{{url_for('.chart', chart_id='engaged_users')}}"
    }).render(12);
    /*
    $("#charts").word_bubble({
        name:"Top Words",
        data_url:"{{url_for('.chart', chart_id='top_words')}}"
    }).render(12);
    */
    $("#charts").stackedline({
        name:"Likes",
        data_url:"{{url_for('.chart', chart_id='likes')}}"
    }).render(12);
    $("#charts").lineplusbar({
        name:"Likes",
        data_url:"{{url_for('.chart', chart_id='like_gains')}}"
    }).render(12);
    $("#charts").pie({
        name:"Engagement by Story Type",
        data_url:"{{url_for('.chart', chart_id='page_by_type')}}"
    }).render(12);
    /*
    $("#charts").pie({
        name:"Engagement by Country",
        data_url:"{{url_for('.chart', chart_id='country')}}"
    }).render(12);*/
});
</script>
{% endblock %}

{% block content %}
    {% from "widgets/bucket.html" import bucket %}
    <div class="row buckets">
        <div class="col-md-3">
            <div class="thumbnail">
                {{ bucket("Audience", "Supporters", like_change['total'], like_change['change'], "#", "Grow") }}
            </div>
        </div>
        <div class="col-md-3">
            <div class="thumbnail">
                {{ bucket("Engagement", "Engaged Supporters", engagement_change['total'], engagement_change['change'], "#", "Boost") }}
            </div>
        </div>
        <div class="col-md-3">
            <div class="thumbnail">
                {{ bucket("Impact", "Actions this week", 19898, 5, "#", "Discover") }}
            </div>
        </div>
        <div class="col-md-3">
            <div class="thumbnail buzz">
                {{ bucket("Buzz", "Actions this week", 19898, 5, "#", "Discover") }}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-9">
            <div class="row">
                <h2>Recent Activity <a class="btn btn-primary" href="{{ url_for('engagement.index') }}">See more</a></h2>
                {{ posts.render(size=5, pagination=False)|safe }}
            </div>
            <div class="row" id="charts"></div>
        </div>
        <div class="col-md-3">
            <div class="thumbnail">
                {{ bucket("Audience", "Supporters", like_change['total'], like_change['change'], "#", "Grow") }}
            </div>
        </div>
    </div>
{% endblock %}
