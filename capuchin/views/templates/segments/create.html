{% extends "base.html" %}
{% block title %}Create Segment{% endblock %}
{% block head %}
<script>
    var id = "{{id}}";
    var filters = {};
    $(document).ready(function(){
        $("#filter-submit").click(function(e){
            $(".term-input").each(function(i, el){
                filters[$(el).data("field")] = $(el).val();
            });
            console.log("test");
            $.pjax({
                container:"#records",
                url: "{{ url_for('.filter_update', id=id, page=0) }}",
                type:"POST",
                data:{"filters":JSON.stringify(filters)},
                push:false,
            });
        })
    });
    $(document).pjax(".pager", "#records", {push:false});

    function filters_updated(e){
        console.log(e);
    }
</script>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-11">
        <input class='form-control' type="text" placeholder="Enter Segment Name" />
    </div>
    <div class="col-md-1">
        <button class="btn btn-success pull-right">Save</button>
    </div>
</div>
<div class="row" id="filtered">
    {% include "segments/filtered.html" %}
</div>
{% endblock %}
